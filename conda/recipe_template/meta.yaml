{{ '{% set name =' }} "{{ name }}" {{ '%}' }} 

package:
{% raw %}  name: {{ name }} {% endraw %}
  version: "{{ version.replace("v","") }}"

source:
  - url: https://github.com/{{ github_repo }}/archive/{{ github_tag }}.tar.gz

build:
  number: 0
  run_exports:
{% raw %}    # As robotology-superbuild packages tipically do not worry about ABI compatibility,
    # we explicitly specify that for every patch version the ABI changes
    - {{ pin_subpackage(name, max_pin='x.x.x') }}
{% endraw %}

requirements:
  build:
{# A C/C++ compiler and CMake are required by all packages #}
{% raw %}    - {{ compiler('c') }}
    - {{ compiler('cxx') }} {% endraw %}
    - cmake
{# Handle specific packages required for gl on Linux, see https://conda-forge.org/docs/maintainer/knowledge_base.html?#libgl #}
{# libxcb, libxfixes, libxau and expat are not documented anywhere, but without those blocktest does not build correctly #}
{% if require_opengl_linux %}{% raw %}    - {{ cdt('mesa-libgl-devel') }}
    - {{ cdt('mesa-dri-drivers') }}
    - {{ cdt('libselinux') }}
    - {{ cdt('libxdamage') }}
    - {{ cdt('libxxf86vm') }}
    - {{ cdt('libxext') }}
    - {{ cdt('libxcb') }}
    - {{ cdt('libxfixes') }}
    - {{ cdt('libxau') }}
    - {{ cdt('expat') }}  {% endraw %}{% endif %}

  host:
{# List all dependencies just a host. Run dependenencies should be correctly set by run_exports #}
{% for dep in dependencies %}    - {{ dep }}
{% endfor %}
{# Handle specific packages required for gl on Linux, see https://conda-forge.org/docs/maintainer/knowledge_base.html?#libgl #}
{% if require_opengl_linux %}    - xorg-libxfixes {% endif %}

  run:
    # bipedal-locomotion-framework requires 10.13 for std::any
    - __osx >={{ MACOSX_DEPLOYMENT_TARGET|default("10.13") }}  # [osx and x86_64]


about:
  home: https://github.com/{{ github_repo }}
